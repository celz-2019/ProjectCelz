<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>recipes</title>
  </head>
  <body>
    <div id="recipe-view"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">
      const displayRecipeInfo = function() {
        //   var recipe = $(this).attr("data-name");
        var recipe = "eggs";
        //TODO: figure out dishType query. "&dishType=breakfast" should work but is not...
        // var type = "dinner";
        var queryURL =
          "https://api.edamam.com/search?q=" +
          recipe +
          "&app_id=be446581&app_key=358c0fd05ef1cfd3bae813759c1efaf1&from=0&to=10";

        $.ajax({
          url: queryURL,
          method: "GET"
        }).then(function(response) {
          console.log(response.hits);
          var recipes = response.hits;
          for (let i = 0; i < recipes.length; i++) {
            var listRecipeDiv = $("<div class='recipes'>");

            var imgURL = recipes[i].recipe.image;
            var title = recipes[i].recipe.label;
            var ingredients = recipes[i].recipe.ingredients;

            var pOne = $("<p>").text(title);
            var favBtn = $("<button>")
              .attr("class", "fav-btn")
              .text("Add to Favorites");
            var image = $("<img>").attr("src", imgURL);

            listRecipeDiv.append(favBtn);
            listRecipeDiv.append(image);
            listRecipeDiv.append(pOne);
            for (let x = 0; x < ingredients.length; x++) {
              console.log(ingredients[x].text);
              var pTwo = $("<p>").text(ingredients[x].text);
              listRecipeDiv.append(pTwo);
            }
            $("#recipe-view").append(listRecipeDiv);
          }
          $(".fav-btn").on("click", function(event) {
            event.preventDefault();
            //Add to favorites function here...
          });
        });
      };
      displayRecipeInfo();
      // $(document).on("click", ".search-btn", displayRecipeInfo);
    </script>
  </body>
</html>
